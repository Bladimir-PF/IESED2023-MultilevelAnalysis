---
title: "Relación entre el rendimiento en la Prueba de Transición de Matemática y factores socioeconómicos en el proceso de admisión 2022 desde una perspectiva multinivel"
author: "Geraldo Padilla & Lesa Hoffman"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  workflowr::wflow_html:
    toc: true
    toc_float: true
    theme: simplex
    code_download: false
    highlight: textmate
    code_folding: 'hide'
bibliography: Ref1.bib  
editor_options: 
  chunk_output_type: console
---

<style type="text/css">
body{
  font-family: Arial;
  font-size: 14pt;
}
</style>

```{r klippy, echo=FALSE, include=TRUE}
klippy::klippy(position = c('top', 'right'), color = 'darkred', tooltip_message = 'Click to copy')
```

```{r setup, include=FALSE}
options(width = 999)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
                      cache = FALSE, tidy = TRUE, size = "small", 
                      tidy.opts = list(width.cutoff = 70))
biblio <- bibtex::read.bib("Ref1.bib")
```

# Introducción

* El rendimiento en las pruebas de admisión es crucial para la admisión en la educación universitaria selectiva, ya que son los factores de selección que mayor ponderación suelen recibir en el puntaje compuesto que utilizan los estudiantes para postular a los programas.

* Aunque la PDT de Matemática es diseñada teniendo como referencia los Objetivos de Aprendizaje (conocimientos y habilidades) de las Bases Curriculares de Matemática de 7mo a 4to Medio, múltiples investigaciones han mostrado que la versión anterior, la PSU, tenía diferencias significativas en los niveles de rendimiento según atributos socioeconómicos de los estudiantes y/o los colegios.

* Es común encontrar en la literatura tres tipos de análisis al respecto:

  + descripción de los niveles de rendimiento en las pruebas de admisión con técnicas de investigación descriptiva (medias, medianas y proporciones por grupo),

  + comparación de los niveles de matrícula proveniente de distintos sectores socioeconómicos en el sistema de educación superior, agregando datos para cada año que son comparados en términos transversales o longitudinales, 

  + ajuste de modelos de regresión lineal general (múltiple, ANOVA, o ANCOVA) o generalizados (logística binaria o multinomial, Poisson (Negative Binomial), Binomial (Beta Binomial),Tobit, Gamma, Log-Normal, cuantílica) de un nivel (**single-level**).

## Rendimiento en la PDT de Matemática y diferencias socioeconómicas entre estudiantes



## Pregunta y objetivo de investigación

De acuerdo a lo mencionado, la pregunta de interés para nuestro estudio es:

¿*Existen diferencias en el rendimiento de la PDT de Matemática entre estudiantes que puedan ser atribuidas a las características socioeconómicas indviduales y escolares que poseen*? 

Por tanto, el objetivo de esta investigación es:

*Analizar la contribución que predictores socieconómicos individuales y escolares tienen sobre el rendimiento en la PDT de Matemática del año 2022 desde una perspectiva multinivel*.

# Metodología

## Diseño

Este es un estudio cuantitativo de diseño transversal, centrado en los resultados de la PDT de Matemática del año 2022. Además del análisis descriptivo de los puntajes promedio en esta prueba según variables socioeconómicas individuales y escolares, se estimó un modelo de regresión lineal multinivel para analizar el efecto que variables socioeconómicas tuvieron sobre los distintos niveles de rendimiento.

## Datos

Los datos corresponden al proceso de admisión del año 2022, los cuales fueron solicitados al DEMRE a través de su [portal de bases de datos](https://demre.cl/portales/portal-bases-datos). Cabe destacar que a diferencia de procesos anteriores, el DEMRE ahora facilita un único repositorio con la información de las distintas etapas del proceso.

## Muestra

Originalmente existen 281.457 registros en la base de datos del proceso de admisión 2022 provista por el DEMRE. Según el objetivo de investigación y el análisis propuesto, solamente dos fitros fueron aplicados:

1. El estudiante debe tener un puntaje válido (entre 150 y 850 puntos) en la PDT de Matemática.
2. El colegio en el cual estudió el postulante debe contar con al menos 10 registros.

El primer filtro se aplica de cualquier modo a la muestra, ya que el modelo utiliza `eliminación por lista` (listwise deletion) para estimar los parámetros. Además, ambos filtros ayudan en la construcción de las variables de nivel 2 para los predictores de nivel 1.

La muestra final estuvo constituida por 229.884 postulantes. Sin embargo, para probar la capacidad predictiva del modelo, se utilizó validación cruzada [@james2013introduction], específicamente un conjunto de validación que representa la mitad de la muestra (seleccionada aleatoriamente según colegio [RBD]). En el primer conjunto de datos se estiman los diferentes modelos de interés hasta obtener la versión final, luego, en el conjunto de validación, se ajusta el mismo modelo y se comparan los estadísticos de ajuste.

En particular, el conjunto de entrenamiento estuvo constituido por 114.762 postulantes pertenencientes a 1550 colegios. El conjunto de validación estuvo constituido por 114.231 casos distribuidos en 1550 colegios.

## Variables

De la base de datos original, se utilizaron:

- RBD
- Sexo del estudiante
- Nivel educativo de la madre
- Nivel educativo del padre
- Tipo de escuela, Humanista o Técnico
- Sector de la escuela, Público, Particular Subvencionado o Particular pagado
- Puntaje Ranking
- Puntaje PDT Matemática

Estas variables fueron manipuladas para identificar valores perdidos, recategorizar valores, y formar un nuevo conjunto de datos. Además, se utilizaron datos del [Portal de Datos Abiertos](https://datosabiertos.mineduc.cl/) del Ministerio de Educación para fortalecer la contextualización de la experiencia educativa de los estudiantes.

Particularmente, se incluyeron las siguientes variables del establecimiento educacional:

- Territorio, Urbano o Rural
- Situación de Convenio SEP (Subvención Escolar Preferencial), Si o No
- Cobro por matrícula o mensualidad, Si o No
- Situación de Programa PACE, Si o No

Cabe destacar que esta información corresponde a los consolidados 2021 o 2022 según disponibilidad.

## Procedimiento

En primer lugar, se realizaron análisis descriptivos y correlacionales entre los predictores de interés y el rendimiento en la PDT de Matemática.

Luego, se estimaron varios modelos de regresión. El primero fue un modelo vacío (**empty model**) de dos niveles (varianza residual a nivel 1 y varianza del intercepto aleatorio a nivel 2) con la variable dependiente para estimar el Indice de Correlación Intraclase (ICC) que justifica la utilización de un modelo multinivel. Luego, se estimaron otros modelos nulos para cada predictor de nivel, los cuales ayudan a determinar si es que estas variables tienen varianza significativa a nivel 2, lo cual justificaría la creación de nuevas variables para identificar adecuadamente los efectos de cada predictor en su respectivo nivel. Cada uno de estos modelos nulos fue comparado con su versión simplificada mediante Test de Verosimilitud (Likelihood Ratio Test, o LRT) para decidir si efectos aleatorios eran necesarios.

Para los predictores de nivel 1 que mostraron varianza aleatoria significativa a nivel 2 se crearon nuevos predictores que representaran esta información. Respecto a la parametrización escogida, los modelos fueron estimados con predictores centrados en un estadístico a nivel 1 (en la media del grupo) y en una constante a nivel 2. Esto provoca que los efectos de nivel 1 se interpreten como diferencias entre estudiantes al interior de un mismo colegio y que los efectos de nivel 2 estén representando las diferencias entre colegios. Sin embargo, para este artículo son de interés los efectos contextuales a nivel 2. Estos efectos son el resultado del efecto a nivel 2 menos el efecto a nivel 1 del predictor, los cuales se interpretan como la contribución adicional que tiene el contexto (media del grupo) sobre el valor individual en la estimación del resultado condicional, controlando por los valores individuales dentro del grupo. Los efectos contextuales se calcularon mediante combinaciones lineales.

Luego de ajustar los primeros modelos multinivel con los respectivos efectos a nivel 1 y nivel 2 de los predictores individuales, se agregaron los predictores a nivel 2. Estos modelos fueron estimados con Máxima Verosimilitud (direct ML) y comparados mediante LRT para escoger la versión con los parámetros que tienen la mayor probabilidad de producir los datos observados en la muestra [@enders2022applied].

Al tener la versión final con efectos fijos, se estimaron modelos con efectos aleatorios, los cuales fueron estimados utilizando Máxima Verosimilitud Restringida (REML), ya que solo se compararon efectos aleatorios. Para el modelo final se estimaron medidas de pseudo-R^2, total R^2, pendientes pseudo-estandarizadas para los predictores con efectos aleatorios, pendientes estandarizadas para los predictores sin efectos aleatorios, y se incluyeron figuras para mejorar la representación de las estimaciones del modelo.

Por último, se estimó el modelo final con efectos fijos y aleatorios en el conjunto de datos de validación y se compararon algunos índices de ajuste entre modelos. 

# Resultados



# Conclusiones (preliminares)



# Cosas por revisar


# Referencias